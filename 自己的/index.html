<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown on Hover or Touch</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
     

    </style>
</head>
<body>
    
            
    <div class="main section" id="section1">
       
        <div class="nav">
           
        <ul>
            <li><a href="./index.html" class="home">首頁</a></li>
            <li><a href="game.html">遊戲介紹</a></li>
            <li><a href="ch.html">角色</a></li>
            <li><a href="world.html">世界</a></li>
            <li><a href="info.html">關於我們</a></li>
        </ul>
        
            <div class="dow" id="openPopupDiv">遊戲下載</div>
        </div>
        <img src="img/logo2 (1).png" alt="" class="logo">
        <img src="img/Download-for-Android.png"  class="qr2" >
        <img src="img/可可愛愛.png" alt="" class="dowar">
                <div class="qr">
                <img src="img/鐵道.png" alt="">
                <div class="dow1">
                <img src="img/Download-for-Android.png" alt="" class="dowload" >
                <img src="img/windows-download.png" alt="" class="dowload1" id="download">
                </div>

        </div>

        <div class="video">
       
            <video autoplay loop muted playsinline class="background-video">
                <source src="img/背景影片.mp4" type="video/mp4">
                <!-- 备用提示信息 -->
            </div> 
            <video autoplay loop muted playsinline class="background-video1">
                <source src="img/手機背景影片.mp4" type="video/mp4">
                <!-- 备用提示信息 -->
            </div> 
            <div class="overlay" id="popupOverlay">
                <div class="popup">
                    <p>立即下載</p>
                    <img src="img/windows-download.png" alt="" class="dowload1" id="download">
                    <button class="close-btn" id="closePopupBtn">關閉</button>
                </div>
            </div>
    
</div>
    </div>
    <div class="mid section" id="section2" >
      
            <div class="image-group1" data-group="group2"   >
                <div class="cha"><h2>角色</h2></div>
                <div class=" container1"   onclick="location.href='ch.html#character1';">       
                    <img src="img/艾特力亞.png" alt=""  class="head" >
                    <div class="container1-text"> 
                    <h2>艾特力亞</h2>
                    <p>男主角，自幼在高階附魔使小八的救助下獲救，立志成為最強附魔使。他個性大大咧咧，表面看似輕率，實際上深思熟慮。因年幼時經歷生死危機，因此行事更加謹慎。冒險途中，他憑藉自己的能力逐步成長，並肩負起更大的責任。</p>
                    
                </div>
                </div>
                <div class="container1"   onclick="location.href='ch.html#character1';">
                    <img src="img/一絲塔.png" alt=""  class="head">
                    <div class="container1-text">
                    <h2>伊斯塔</h2>
                    <p>女主角，性格冷靜、自主，外表神秘且喜歡美食，內心卻對自己的族裔（精靈族）感到自豪。她對艾特力亞的冒失舉動感到無奈，因實驗被打斷而不滿，起初對他態度疏離。隨著冒險的進展，她逐漸對艾特力亞敞開心扉，並開始信任他。</p>
                </div>
                </div>
                <div class="container1" onclick="location.href='ch hachi.html#character1';" style="margin-bottom: 40px;">
                    <img src="img/小八.png" alt=""  class="head" >
                    <div class="container1-text">
                    <h2>小八</h2>
                    <p>三階附魔使，艾特力亞的救命恩人和偶像。他以堅韌的意志和強大的附魔能力受到人們的尊敬。對艾特力亞的成長起到重要作用，最終與艾特力亞對峙，成為男主角成長的關鍵標誌。</p>
                </div>
                </div>
                <div class="plus">
                    <a href="ch.html">----查看更多角色----</a>
                </div>
            </div>
            
        </div>
        
    </div>
    <footer>
        <div class="footer-content">
            <div class="footer-section about">
                <h3>關於我們</h3>
                <p>我們是一個致力於分享遊戲熱情的團隊。通過提供深入的遊戲背景介紹、角色資訊和世界觀分析，我們希望玩家可以更深入地了解遊戲的樂趣和故事，沉浸於一個充滿創意和挑戰的魔法世界中。</p>
            </div>
    
            <div class="footer-section links">
                <h3>快速連結</h3>
                <ul>
                  
                    <li><a href="index.html">首頁</a></li>
                    <li><a href="game.html">遊戲介紹</a></li>
                    <li><a href="ch.html">角色介紹</a></li>
                    <li><a href="world.html">世界觀</a></li>
                    <li><a href="dow.html">下載中心</a></li>
                </ul>
            </div>
    
            <div class="footer-section contact">
                <h3>聯絡我們</h3>
                <p>如果您有任何疑問或建議，請隨時聯繫我們的客服團隊。我們會盡快為您提供幫助，讓您獲得最佳的體驗。</p>
                <p>Email: support@example.com</p>
                <p>Phone: (123) 456-7890</p>
            </div>
        </div>
    
        <div class="footer-bottom">
            <p>&copy; 2024 魔法世界遊戲介紹網站. 版權所有. 未經授權禁止轉載或引用本站內容。</p>
        </div>
    </footer>
    <script>
        const openPopupDiv = document.getElementById('openPopupDiv');
        const closePopupBtn = document.getElementById('closePopupBtn');
        const popupOverlay = document.getElementById('popupOverlay');

        // 点击触发弹窗
        openPopupDiv.addEventListener('click', () => {
            popupOverlay.style.display = 'block';
        });

        // 关闭弹窗
        closePopupBtn.addEventListener('click', () => {
            popupOverlay.style.display = 'none';
        });

        // 点击遮罩层关闭弹窗
        popupOverlay.addEventListener('click', (event) => {
            if (event.target === popupOverlay) {
                popupOverlay.style.display = 'none';
            }
        });
    </script>
    <script>
        document.getElementById('download').addEventListener('click', function() {
            // 创建一个隐藏的 <a> 元素
            const a = document.createElement('a');
            a.href = "img/TAOA_EA_v0.1.zip"; // 替换为图片路径
            a.download = 'TAOA_EA_v0.1.zip'; // 设置下载图片的名字
    
            // 将 <a> 元素添加到页面并模拟点击
            document.body.appendChild(a);
            a.click();
    
            // 移除 <a> 元素
            document.body.removeChild(a);
        });
    </script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
      </script>
      
    <script>
        // 当前显示的 section 索引
        let currentSection = 1;
        let firstScrollToSectionTop = true; // 标志：是否是第一次滚动到当前 section 顶部
        let isTouchDevice = 'ontouchstart' in document.documentElement; // 检测是否为触摸设备
    
        // 监听滚轮和触摸事件
        const addScrollEventListener = () => {
            // 处理滚轮事件
            window.addEventListener('wheel', handleScroll);
    
            // 处理触摸事件
            let touchStartY = 0;
            window.addEventListener('touchstart', (event) => {
                touchStartY = event.touches[0].clientY;
            });
            window.addEventListener('touchmove', (event) => {
                const touchEndY = event.touches[0].clientY;
                const deltaY = touchStartY - touchEndY;
                handleScroll({ deltaY: deltaY });
            });
        };
    
        const handleScroll = (event) => {
            const footer = document.querySelector('footer');
            const footerPosition = footer.getBoundingClientRect().top;
            const viewportHeight = window.innerHeight;
            const totalSections = document.querySelectorAll('.section').length;
    
            // 检查是否已经到达 footer 部分
            if (footerPosition < viewportHeight && event.deltaY > 0) {
                // 在 footer 停止继续向下滚动
                currentSection = totalSections; // 设置 currentSection 为最后一个 section
                return;
            }
    
            // 如果在 footer 区域内并且是往上滚动
            if (footerPosition < viewportHeight && event.deltaY < 0) {
                currentSection = totalSections; // 设置当前 section 为倒数第二个 section
                document.getElementById(`section${currentSection}`).scrollIntoView({ behavior: 'smooth' });
                return;
            }
    
            // 获取当前 section 的元素
            const currentSectionElement = document.getElementById(`section${currentSection}`);
            const sectionRect = currentSectionElement.getBoundingClientRect();
    
            // 如果是第一次滚动到当前 section，先滚动到其顶部
            if (firstScrollToSectionTop) {
                currentSectionElement.scrollIntoView({ behavior: 'smooth' });
                firstScrollToSectionTop = false; // 标志设置为 false，第二次滚动直接跳到下一个 section
                return;
            }
    
            // 如果 section 大于一个屏幕高度，只有在到达底部时才允许向下滚动，顶部时允许向上滚动
            if (sectionRect.height > viewportHeight) {
                if (event.deltaY > 0 && sectionRect.bottom > viewportHeight + 5) {
                    // 在 section 内部向下滚动时不跳转
                    return;
                } else if (event.deltaY < 0 && sectionRect.top < -5) {
                    // 在 section 内部向上滚动时不跳转
                    return;
                }
            }
    
            // 第二次滚动，继续到下一个或上一个 section
            if (event.deltaY > 0) {
                currentSection++;
            } else {
                currentSection--;
            }
    
            // 限制 currentSection 范围
            currentSection = Math.max(1, Math.min(currentSection, totalSections));
    
            // 重置标志为 true，以便下一次进入新的 section 时重新先滚到其顶部
            firstScrollToSectionTop = true;
    
            // 滚动到指定的 section
            document.getElementById(`section${currentSection}`).scrollIntoView({
                behavior: 'smooth'
            });
        };
    
        // 初始化事件监听
        addScrollEventListener();
    </script>
    
</body>
</html>
